CREATE DATABASE QUANLYBANLE

USE QUANLYBANLE

GO

CREATE TABLE DANHMUC (
    MADANHMUC CHAR(15) PRIMARY KEY,
    TENDANHMUC NVARCHAR(200),
    MOTA NVARCHAR(1000)
)

CREATE TABLE SANPHAM (
    MASP CHAR(15) PRIMARY KEY,
    TENSP NVARCHAR(300),
    MAVACH NVARCHAR(128),
    MOTA NVARCHAR(MAX),
    MADANHMUC CHAR(15),
    DONGIA FLOAT DEFAULT 0,
    THUOCTINH NVARCHAR(MAX),
    THUEVAT FLOAT DEFAULT 0,
    SOLUONGTON INT DEFAULT 0,
    CONSTRAINT FK_SANPHAM_DANHMUC FOREIGN KEY (MADANHMUC) REFERENCES DANHMUC(MADANHMUC)
)

CREATE TABLE KHUYENMAI (
    MAKM CHAR(15) PRIMARY KEY,
    TENKM NVARCHAR(300),
    MASP CHAR(15),
    NGAYBATDAU DATE,
    NGAYKETTHUC DATE,
    CONSTRAINT FK_KHUYENMAI_SANPHAM FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP),
    CONSTRAINT CK_KHUYENMAI_DATE CHECK (NGAYKETTHUC >= NGAYBATDAU)
)

CREATE TABLE NHACUNGCAP (
    MANCC CHAR(15) PRIMARY KEY,
    TENNCC NVARCHAR(300),
    DIACHI NVARCHAR(500),
    SDT VARCHAR(12),
    EMAIL NVARCHAR(320)
)

CREATE TABLE NHANVIEN
(
	MANV CHAR(15) PRIMARY KEY,
	TENNV NVARCHAR(50),
	SDT CHAR(10),
	DIACHI NVARCHAR(100)
)

CREATE TABLE PHIEUNHAPKHO
(
	MAPHIEUNHAP CHAR(15) PRIMARY KEY,
	MASP CHAR(15) FOREIGN KEY REFERENCES SANPHAM(MASP),
	MANCC CHAR(15) FOREIGN KEY REFERENCES NHACUNGCAP(MANCC),
	MANV CHAR(15) FOREIGN KEY REFERENCES NHANVIEN(MANV),
	NGAYLAP DATETIME,
	THUEVAT FLOAT
)

CREATE TABLE CHITIETNHAP
(
	MAPHIEUNHAP CHAR(15) FOREIGN KEY REFERENCES PHIEUNHAPKHO(MAPHIEUNHAP),
	MASP CHAR(15) FOREIGN KEY REFERENCES SANPHAM(MASP),
	SOLUONG INT,
	DONGIANHAP FLOAT,
	THANHTIEN FLOAT,
	NGAYNHAPKHO DATETIME,
	PRIMARY KEY(MAPHIEUNHAP, MASP)
)

CREATE TABLE TAIKHOAN(
	MATAIKHOAN CHAR(15) PRIMARY KEY,
	USERNAME CHAR(20),
	PASS CHAR(20),
	QUYEN INT
)
GO

CREATE TABLE KHACHHANG(
	MAKH CHAR(15) PRIMARY KEY,
	TENKH NVARCHAR(100),
	SDT CHAR(10),
	DIACHI NVARCHAR(300)
)
GO

CREATE TABLE HOADONBAN(
	MAHDBAN CHAR(15) PRIMARY KEY,
	MANV CHAR(15) FOREIGN KEY REFERENCES NHANVIEN(MANV),
	MAKH CHAR(15) FOREIGN KEY REFERENCES KHACHHANG(MAKH),
	NGAYLAP DATETIME,
	TONGTIENHANG FLOAT,
	THUEVAT FLOAT,
	GIAMGIA FLOAT
)
GO

	CREATE TABLE CT_HDB(
	MAHDBAN CHAR(15) FOREIGN KEY REFERENCES HOADONBAN(MAHDBAN),
	MASP CHAR(15) FOREIGN KEY REFERENCES SANPHAM(MASP),
	SOLUONG INT,
	DONGIA FLOAT,
	TONGTIEN FLOAT,
	PRIMARY KEY (MAHDBAN, MASP)
)
GO

CREATE TABLE THANHTOAN(
	MATHANHTOAN CHAR(15) PRIMARY KEY,
	MAHDBAN CHAR(15) FOREIGN KEY REFERENCES HOADONBAN(MAHDBAN),
	PHUONGTHUC NVARCHAR(50),
	SOTIENTHANHTOAN FLOAT,
	NGAYTHANHTOAN DATETIME,
	TRANGTHAI NVARCHAR(50)
)




-- DANHMUC
INSERT INTO DANHMUC VALUES ('DM001', N'Điện thoại', N'Các loại điện thoại di động');
INSERT INTO DANHMUC VALUES ('DM002', N'Máy tính', N'Laptop, PC, linh kiện');
INSERT INTO DANHMUC VALUES ('DM003', N'Gia dụng', N'Thiết bị gia dụng nhà bếp, gia đình');
INSERT INTO DANHMUC VALUES ('DM004', N'Đồ uống', N'Nước giải khát, cà phê, bia');
INSERT INTO DANHMUC VALUES ('DM005', N'Thời trang', N'Quần áo, giày dép, phụ kiện');

-- SANPHAM
INSERT INTO SANPHAM VALUES ('SP001', N'iPhone 14', '1111111111111', N'Điện thoại Apple', 'DM001', 20000000, N'Màu đen', 10, 50);
INSERT INTO SANPHAM VALUES ('SP002', N'Samsung Galaxy S23', '2222222222222', N'Điện thoại Samsung', 'DM001', 18000000, N'Màu xanh', 10, 30);
INSERT INTO SANPHAM VALUES ('SP003', N'Dell XPS 13', '3333333333333', N'Laptop Dell', 'DM002', 30000000, N'RAM 16GB', 10, 20);
INSERT INTO SANPHAM VALUES ('SP004', N'Áo sơ mi nam', '4444444444444', N'Áo cotton nam', 'DM005', 500000, N'Màu trắng', 5, 100);
INSERT INTO SANPHAM VALUES ('SP005', N'Nồi cơm điện Sharp', '5555555555555', N'Nồi cơm điện 1.8L', 'DM003', 1500000, N'Màu bạc', 10, 40);

-- KHUYENMAI
INSERT INTO KHUYENMAI VALUES ('KM001', N'Giảm giá iPhone 14', 'SP001', '2025-01-01', '2025-01-15');
INSERT INTO KHUYENMAI VALUES ('KM002', N'Khuyến mãi Galaxy S23', 'SP002', '2025-02-01', '2025-02-28');
INSERT INTO KHUYENMAI VALUES ('KM003', N'Giảm giá Dell XPS 13', 'SP003', '2025-03-01', '2025-03-15');
INSERT INTO KHUYENMAI VALUES ('KM004', N'Mua 2 áo sơ mi tặng 1', 'SP004', '2025-04-01', '2025-04-30');
INSERT INTO KHUYENMAI VALUES ('KM005', N'Giảm 10% nồi cơm điện', 'SP005', '2025-05-01', '2025-05-15');

-- NHACUNGCAP
INSERT INTO NHACUNGCAP VALUES ('NCC001', N'Apple VN', N'Hà Nội', '0901234567', 'applevn@gmail.com');
INSERT INTO NHACUNGCAP VALUES ('NCC002', N'Samsung VN', N'Hồ Chí Minh', '0902345678', 'samsungvn@gmail.com');
INSERT INTO NHACUNGCAP VALUES ('NCC003', N'Dell VN', N'Đà Nẵng', '0903456789', 'dellvn@gmail.com');
INSERT INTO NHACUNGCAP VALUES ('NCC004', N'Sharp VN', N'Hải Phòng', '0904567890', 'sharpvn@gmail.com');
INSERT INTO NHACUNGCAP VALUES ('NCC005', N'Việt Tiến', N'Hà Nội', '0905678901', 'viettien@gmail.com');

-- NHANVIEN
INSERT INTO NHANVIEN VALUES ('NV001', N'Nguyễn Văn A', '0911111111', N'Hà Nội');
INSERT INTO NHANVIEN VALUES ('NV002', N'Trần Thị B', '0922222222', N'Hồ Chí Minh');
INSERT INTO NHANVIEN VALUES ('NV003', N'Lê Văn C', '0933333333', N'Đà Nẵng');
INSERT INTO NHANVIEN VALUES ('NV004', N'Phạm Thị D', '0944444444', N'Hải Phòng');
INSERT INTO NHANVIEN VALUES ('NV005', N'Hoàng Văn E', '0955555555', N'Cần Thơ');

-- PHIEUNHAPKHO
INSERT INTO PHIEUNHAPKHO VALUES ('PN001', 'SP001', 'NCC001', 'NV001', '2025-01-05', 10);
INSERT INTO PHIEUNHAPKHO VALUES ('PN002', 'SP002', 'NCC002', 'NV002', '2025-01-06', 10);
INSERT INTO PHIEUNHAPKHO VALUES ('PN003', 'SP003', 'NCC003', 'NV003', '2025-01-07', 10);
INSERT INTO PHIEUNHAPKHO VALUES ('PN004', 'SP004', 'NCC005', 'NV004', '2025-01-08', 5);
INSERT INTO PHIEUNHAPKHO VALUES ('PN005', 'SP005', 'NCC004', 'NV005', '2025-01-09', 10);

-- CHITIETNHAP
INSERT INTO CHITIETNHAP VALUES ('PN001', 'SP001', 10, 18000000, 180000000, '2025-01-05');
INSERT INTO CHITIETNHAP VALUES ('PN002', 'SP002', 5, 16000000, 80000000, '2025-01-06');
INSERT INTO CHITIETNHAP VALUES ('PN003', 'SP003', 3, 28000000, 84000000, '2025-01-07');
INSERT INTO CHITIETNHAP VALUES ('PN004', 'SP004', 20, 400000, 8000000, '2025-01-08');
INSERT INTO CHITIETNHAP VALUES ('PN005', 'SP005', 15, 1200000, 18000000, '2025-01-09');

-- TAIKHOAN
INSERT INTO TAIKHOAN VALUES ('TK001', 'user1', 'pass1', 1);
INSERT INTO TAIKHOAN VALUES ('TK002', 'user2', 'pass2', 2);
INSERT INTO TAIKHOAN VALUES ('TK003', 'user3', 'pass3', 1);
INSERT INTO TAIKHOAN VALUES ('TK004', 'admin', 'admin123', 0);
INSERT INTO TAIKHOAN VALUES ('TK005', 'staff', 'staff123', 2);

-- KHACHHANG
INSERT INTO KHACHHANG VALUES ('KH001', N'Lê Thị Lan', '0961111111', N'Hà Nội');
INSERT INTO KHACHHANG VALUES ('KH002', N'Nguyễn Văn Nam', '0972222222', N'Hồ Chí Minh');
INSERT INTO KHACHHANG VALUES ('KH003', N'Trần Văn Hùng', '0983333333', N'Đà Nẵng');
INSERT INTO KHACHHANG VALUES ('KH004', N'Phạm Thị Mai', '0994444444', N'Hải Phòng');
INSERT INTO KHACHHANG VALUES ('KH005', N'Hoàng Văn Bình', '0905555555', N'Cần Thơ');

-- HOADONBAN
INSERT INTO HOADONBAN VALUES ('HD001', 'NV001', 'KH001', '2025-01-10', 20000000, 10, 0);
INSERT INTO HOADONBAN VALUES ('HD002', 'NV002', 'KH002', '2025-01-11', 18000000, 10, 1000000);
INSERT INTO HOADONBAN VALUES ('HD003', 'NV003', 'KH003', '2025-01-12', 30000000, 10, 2000000);
INSERT INTO HOADONBAN VALUES ('HD004', 'NV004', 'KH004', '2025-01-13', 500000, 5, 0);
INSERT INTO HOADONBAN VALUES ('HD005', 'NV005', 'KH005', '2025-01-14', 1500000, 10, 100000);

-- CT_HDB
INSERT INTO CT_HDB VALUES ('HD001', 'SP001', 1, 20000000, 20000000);
INSERT INTO CT_HDB VALUES ('HD002', 'SP002', 1, 18000000, 18000000);
INSERT INTO CT_HDB VALUES ('HD003', 'SP003', 1, 30000000, 30000000);
INSERT INTO CT_HDB VALUES ('HD004', 'SP004', 1, 500000, 500000);
INSERT INTO CT_HDB VALUES ('HD005', 'SP005', 1, 1500000, 1500000);

-- THANHTOAN
INSERT INTO THANHTOAN VALUES ('TT001', 'HD001', N'Tiền mặt', 20000000, '2025-01-10', N'Đã thanh toán');
INSERT INTO THANHTOAN VALUES ('TT002', 'HD002', N'Chuyển khoản', 17000000, '2025-01-11', N'Đã thanh toán');
INSERT INTO THANHTOAN VALUES ('TT003', 'HD003', N'Thẻ tín dụng', 28000000, '2025-01-12', N'Đã thanh toán');
INSERT INTO THANHTOAN VALUES ('TT004', 'HD004', N'Tiền mặt', 500000, '2025-01-13', N'Đã thanh toán');
INSERT INTO THANHTOAN VALUES ('TT005', 'HD005', N'Chuyển khoản', 1400000, '2025-01-14', N'Chưa thanh toán');




SELECT * FROM DANHMUC;
SELECT * FROM SANPHAM;
SELECT * FROM KHUYENMAI;
SELECT * FROM NHACUNGCAP;
SELECT * FROM NHANVIEN;
SELECT * FROM PHIEUNHAPKHO;
SELECT * FROM CHITIETNHAP;
SELECT * FROM TAIKHOAN;
SELECT * FROM KHACHHANG;
SELECT * FROM HOADONBAN;
SELECT * FROM CT_HDB;
SELECT * FROM THANHTOAN;
