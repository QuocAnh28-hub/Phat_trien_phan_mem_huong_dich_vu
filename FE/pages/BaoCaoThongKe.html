<!doctype html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Qu·∫£n l√Ω b√°n l·∫ª v√† kho - POS & Inventory</title>
    <link rel="stylesheet" href="../style/BaoCaoThongKe.css">
  </head>
  <body>
    <div class="wrap">
      <aside class="sidebar">
        <div>
          <div class="brand">
            <div class="logo">DAH</div>
            <div>Qu·∫£n l√Ω b√°n l·∫ª v√† kho DAH</div>
          </div>

          <div class="nav">
            <div class="temple"></div>
            <div class="section-title">ADMIN</div>
            <a href="QuanLyTaiKhoan.html">üõ†Ô∏è Qu·∫£n l√Ω t√†i kho·∫£n</a>
            <a href="QuanLyNhanVien.html">üßë‚Äçüíº Qu·∫£n l√Ω nh√¢n vi√™n</a>
            <a href="QuanLyKhuyenMai.html">üéÅ Qu·∫£n l√Ω khuy·∫øn m√£i</a>

            <div class="section-title" style="margin-top:20px;font-weight:700;">K·∫ø to√°n</div>
            <a href="../pages/QuanLyConNo.html">üßæ Qu·∫£n l√Ω c√¥ng n·ª£</a>
            <a href="../pages/BaoCaoThongKe.html">üìä B√°o c√°o th·ªëng k√™</a>

            <div class="section-title">THU NG√ÇN</div>
            <a href="QuanLyBanHang.html">üßæ QU·∫¢N L√ù B√ÅN H√ÄNG</a>
            <a href="XuLyDoiTra.html">üîÅ X·ª¨ L√ù ƒê·ªîI TR·∫¢</a>

            <div class="section-title" style="margin-top:20px;font-weight:700;">Th·ªß kho</div>
            <a href="QuanLyDanhMuc.html">üì¶ Qu·∫£n l√Ω Danh m·ª•c</a>
            <a href="QuanLySanPham.html">üì¶ Qu·∫£n l√Ω S·∫£n ph·∫©m</a>
            <a href="QuanLyNhapKho.html">üì¶Qu·∫£n l√Ω Nh·∫≠p kho</a>
            <a href="QuanLyTonKho.html">üì¶Qu·∫£n l√Ω T·ªìn kho</a>

            <div class="section-title" style="margin-top:20px;font-weight:700;">T√†i kho·∫£n</div>
            <div class="quick-stats">
              <div class="row" style="justify-content:space-between"><span>Ng∆∞·ªùi d√πng:</span><strong>DAH</strong></div>
            </div>
          </div>
        </div>

        <div class="small muted">¬© DAH</div>
      </aside>

      <main class="main">
        <div class="header">
          <div>
            <div class="breadcrumbs">K·∫ø to√°n / B√°o c√°o th·ªëng k√™</div>
            <h1>B√°o c√°o th·ªëng k√™</h1>
          </div>
        </div>

        <section class="report-form" aria-label="Form b√°o c√°o th·ªëng k√™">
          <form id="report-form">
            <div class="report-row">
              <label for="from">T·ª´ ng√†y</label>
              <input type="date" id="from" name="from">

              <label for="to">ƒê·∫øn ng√†y</label>
              <input type="date" id="to" name="to">

              <label for="type">Lo·∫°i b√°o c√°o</label>
              <select id="type" name="type">
                <option value="Doanh thu">Doanh thu</option>
                <option value="S·∫£n ph·∫©m b√°n ch·∫°y">S·∫£n ph·∫©m b√°n ch·∫°y</option>
                <option value="S·∫£n ph·∫©m t·ªìn nhi·ªÅu">S·∫£n ph·∫©m t·ªìn nhi·ªÅu</option>
              </select>
            </div>

            <div class="report-actions">
              <button type="submit">Xem b√°o c√°o</button>
              <button type="button" id="export-pdf" disabled title="Ch∆∞a tri·ªÉn khai">Xu·∫•t PDF</button>
            </div>
          </form>

          <div id="report-results" aria-live="polite"></div>
        </section>
      </main>
    </div>

    <script>
      // D·ªØ li·ªáu demo
      const db = {
        HoaDonBan: [
          { id:'HD001', ngay:'2025-10-01', tong:1500000, paid:1500000 },
          { id:'HD002', ngay:'2025-10-03', tong:800000, paid:800000 },
          { id:'HD003', ngay:'2025-10-10', tong:1200000, paid:900000 },
          { id:'HD004', ngay:'2025-10-12', tong:2000000, paid:2000000 },
          { id:'HD005', ngay:'2025-10-15', tong:500000, paid:500000 }
        ],
        SanPham: [
          { ma:'SP01', ten:'N∆∞·ªõc ng·ªçt Coca', soLuongBan:120, tonKho:40 },
          { ma:'SP02', ten:'B√°nh Oreo', soLuongBan:95, tonKho:25 },
          { ma:'SP03', ten:'Snack Oishi', soLuongBan:150, tonKho:15 },
          { ma:'SP04', ten:'S·ªØa Vinamilk', soLuongBan:80, tonKho:60 },
          { ma:'SP05', ten:'Tr√† Xanh 0 ƒë·ªô', soLuongBan:100, tonKho:50 },
          { ma:'SP06', ten:'M√¨ H·∫£o H·∫£o', soLuongBan:70, tonKho:200 },
          { ma:'SP07', ten:'K·∫πo Alpenliebe', soLuongBan:60, tonKho:180 }
        ]
      };

      const money = n => new Intl.NumberFormat('vi-VN').format(n || 0);

      const form = document.getElementById('report-form');
      const result = document.getElementById('report-results');

      form.addEventListener('submit', e => {
        e.preventDefault();
        const type = form.type.value;
        const from = form.from.value;
        const to = form.to.value;
        let html = `<p><strong>Th·ªùi gian th·ªëng k√™:</strong> ${from || '---'} ‚Üí ${to || '---'}</p>`;

        if (type === 'Doanh thu') {
          html += renderRevenue();
        } else if (type === 'S·∫£n ph·∫©m b√°n ch·∫°y') {
            html += renderTopProducts();
        } else if (type === 'S·∫£n ph·∫©m t·ªìn nhi·ªÅu') {
            html += renderStockedProducts();
        }
        result.innerHTML = html;
      });

      // B√°o c√°o doanh thu
      function renderRevenue() {
        let html = `<table><thead><tr><th>M√£ h√≥a ƒë∆°n</th><th>Ng√†y</th><th>S·ªë ti·ªÅn thanh to√°n (‚Ç´)</th></tr></thead><tbody>`;
        let total = 0;
        db.HoaDonBan.forEach(h => {
          html += `<tr><td>${h.id}</td><td>${h.ngay}</td><td>${money(h.paid)}</td></tr>`;
          total += h.paid;
        });
        html += `</tbody><tfoot><tr><td colspan="2">T·ªïng c·ªông</td><td>${money(total)}</td></tr></tfoot></table>`;
        return html;
      }

      // B√°o c√°o s·∫£n ph·∫©m b√°n ch·∫°y
      function renderTopProducts() {
        const sorted = [...db.SanPham].sort((a,b)=>b.soLuongBan - a.soLuongBan).slice(0,5);
        let html = `<table><thead><tr><th>M√£ SP</th><th>T√™n s·∫£n ph·∫©m</th><th>S·ªë l∆∞·ª£ng b√°n</th></tr></thead><tbody>`;
        sorted.forEach(sp => {
          html += `<tr><td>${sp.ma}</td><td>${sp.ten}</td><td>${sp.soLuongBan}</td></tr>`;
        });
        html += `</tbody></table>`;
        return html;
      }

      // B√°o c√°o s·∫£n ph·∫©m t·ªìn nhi·ªÅu
      function renderStockedProducts() {
        const sorted = [...db.SanPham].sort((a,b)=>b.tonKho - a.tonKho).slice(0,5);
        let html = `<table><thead><tr><th>M√£ SP</th><th>T√™n s·∫£n ph·∫©m</th><th>T·ªìn kho</th><th>L∆∞·ª£t b√°n</th></tr></thead><tbody>`;
        sorted.forEach(sp => {
          html += `<tr><td>${sp.ma}</td><td>${sp.ten}</td><td>${sp.tonKho}</td><td>${sp.soLuongBan}</td></tr>`;
        });
        html += `</tbody></table>`;
        return html;
      }
    </script>
  </body>
</html>